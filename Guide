# Sofle ZMK Firmware

This repo builds and publishes firmware for a Sofle keyboard running ZMK on **nice!nano v2** controllers.  
Each push/PR to this repo automatically produces firmware artifacts for flashing.

---

## ğŸ”§ Build Targets

Defined in [`build.yaml`](./build.yaml):

- `nice_nano_v2 + sofle_left`
- `nice_nano_v2 + sofle_right`
- `nice_nano_v2 + settings_reset` (wipe stored settings/bonds)

---

## â¬‡ï¸ Downloading Firmware

1. Go to [Actions](../../actions) â†’ open the latest successful run.
2. Under **Artifacts**, download:
   - `sofle_left` â†’ flash to the **left half**
   - `sofle_right` â†’ flash to the **right half**
   - `settings_reset` *(optional)* â†’ only if you need to wipe settings on a half.

---

## ğŸ’¾ Flashing Guide

1. **Enter bootloader mode**:  
   Double-tap the reset button on your nice!nano. A USB drive named `NICENANO` will appear.

2. **Flash firmware**:  
   Drag & drop the correct `.uf2` onto the drive:
   - Left build â†’ left nice!nano  
   - Right build â†’ right nice!nano  

3. **Reboot automatically**:  
   The drive will disappear, and the half will reboot into ZMK firmware.

---

## ğŸ”Œ Bluetooth Pairing

On the **RAISE** layer:
- `BT_CLR` â†’ clear old bonds
- `BT1â€¦BT5` â†’ select Bluetooth profile slots

On your computer/phone, pair the Sofle when it appears in Bluetooth devices.  
Repeat for each slot you want to use.

---

## ğŸŒˆ RGB Controls Cheatsheet

Hold **LOWER + RAISE** to enter the **ADJUST** layer:

### Power
- `RGB_TOG` â†’ Toggle underglow ON/OFF  
- `EP_TOG` â†’ Toggle external LED power (if wired that way)  

### Effects
- `RGB_EFF` â†’ Cycle through:
  1. Solid  
  2. Breathing  
  3. Rainbow Swirl  
  4. Rainbow Mood  
  5. Rainbow Chase  
  6. Twinkle âœ¨  
  7. Flicker ğŸ”¥  

### Adjustments
- `RGB_HUI` / `RGB_HUD` â†’ Hue up/down (color wheel)  
- `RGB_SAI` / `RGB_SAD` â†’ Saturation up/down (vivid â†” white)  
- `RGB_BRI` / `RGB_BRD` â†’ Brightness up/down  

#### Hue Reference
| Range | Colors |
|-------|--------|
| 0â€“30  | Red â†’ Orange â†’ Yellow (warm) |
| 60â€“180| Green â†’ Cyan |
| 180â€“300 | Blue â†’ Purple â†’ Pink |
| 300â€“360 | Back to Red |

### Quick Recipes
- **Warm White** â†’ Hue near orange/yellow + lower saturation  
- **Cool White** â†’ Hue near cyan/blue + lower saturation  
- **Soft Ambient** â†’ Any hue + low brightness/saturation  
- **Bold Pop** â†’ Any hue + max saturation + high brightness  

---

## âš¡ Defaults (from this config)

- Lights **ON at startup**  
- Default effect = **Twinkle âœ¨**  
- Speed = **3/5 (medium)**  
- Brightness = **80%**  
- Saturation = **100% (vivid)**  

---

## ğŸ› ï¸ Troubleshooting

- **Wrong half flashed?** â†’ Re-flash with the correct `.uf2`.  
- **Weird behavior?** â†’ Flash `settings_reset`, then re-flash normal firmware and re-pair Bluetooth.  
- **No lights?** â†’ Confirm `CONFIG_ZMK_RGB_UNDERGLOW=y` in [`config/sofle.conf`](./config/sofle.conf).  
- **Display blanks when RGB off?** â†’ Uncomment  
  ```ini
  CONFIG_ZMK_RGB_UNDERGLOW_EXT_POWER=n
